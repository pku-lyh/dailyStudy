## <font style="color:#DF2A3F;">输入一行命令之后Linux底层是怎么执行的（一般只问这个）</font>
### 1.Shell 解析命令
Shell 会按照以下步骤解析命令：

1. **解析（Lexical Analysis）**
    - Shell 拆分输入字符串，识别 **命令 **`**ls**`** 和参数 **`**-l**`。
2. **查找可执行文件（Command Resolution）**
    - Shell 先检查 `ls` 是否是**内建命令**（如 `cd`），如果不是，就去 `$PATH` 变量指定的路径中寻找 `ls`。
3. **创建子进程（Fork & Exec）**
    - Shell 使用 `**fork()**`** 创建子进程**，用于执行 `ls` 命令。
    - **子进程调用 **`**execve("/bin/ls", ["ls", "-l"], envp)**`，用 `ls` 替换自己。

### 2. 内核处理（系统调用层面）
当 `execve()` 被调用时，Linux 内核开始接管执行：

#### (1) 进程创建
+ `fork()` 通过 **复制当前进程（shell）** 来创建新进程（`ls`）。
+ `**execve()**`** 加载 **`**/bin/ls**`** 的可执行文件**，替换子进程的代码段。
+ **进程表（Process Table）** 记录新进程的状态。

#### (2) 加载可执行文件
+ `execve()` 触发 `**open()**`** 系统调用**，读取 `/bin/ls`。
+ **内存管理（MMU）**： 
    - Linux 读取 `ls` 的 ELF（Executable and Linkable Format）格式，映射到**虚拟内存**。
    - 如果 `ls` 依赖动态库（如 `libc.so`），则触发 `mmap()` 加载。

#### (3) CPU 调度
+ Linux **调度器（Scheduler）** 选择 `ls` 进程执行，并分配 CPU 资源。
+ `ls` 进入 **RUNNING** 状态，在 CPU 上运行。

### 4. 执行 ls 命令
### 5. 终端显示结果
### 6. 进程结束
+ `ls` 执行完毕，调用 `exit()`，通知内核进程终止。
+ Shell 通过 `waitpid()` 捕获 `ls` 的退出状态，并准备接收下一条命令。

### **🔹****总结：从输入命令到执行完毕**
1. **Shell 解析命令**
2. **查找命令并执行 **`**fork()**`** 创建子进程**
3. **子进程调用 **`**execve()**`** 加载 **`**/bin/ls**`
4. **内核调度，ls 进程运行**
5. `**ls**`** 读取目录信息，并调用 **`**write()**`** 输出**
6. **终端显示结果**
7. **进程退出，Shell 继续等待用户输入**

💡 **核心机制：**

+ **Shell 解析（命令查找、环境变量）**
+ **进程管理（Fork & Exec）**
+ **文件系统（ELF 加载、目录读取）**
+ **系统调用（**`**execve**`**、**`**stat**`**、**`**write**`**）**
+ **CPU 调度（运行进程）**
+ **终端交互（TTY 设备）**

# Linux命令基础
## 创建和查看目录或文件夹
### ls(list)
**指定查看对应文件夹的内容**

**语法：**ls [-l -h -a] [参数] 

**参数：**被查看的文件夹，不提供参数，表示查看当前工作目录 

+ -l，以列表形式查看 
+ -h，配合-l，以更加人性化的方式显示文件大小 
+ -a，显示隐藏文件 

**隐藏文件、文件夹 **

在Linux中以.开头的，均是隐藏的。 默认不显示出来，需要-a选项才可查看到。  

### cd(change directory)
**功能：**切换工作目录

**语法：**cd [目标目录]

**参数：**目标目录，要切换去的地方，不提供默认切换到当前登录用户HOME目录

### pwd(print work directory)
**功能：**展示当前工作目录

**语法：**pwd

### mkdir(make directory)
**功能：**创建文件夹

**语法：**mkdir [-p] 参数

**参数：**被创建文件夹的路径

**选项：**-p，可选，表示创建前置路径

## 创建和查看文件命令
### touch命令 
**功能：**创建文件

**语法：**touch 参数

**参数：**被创建的文件路径

### cat命令 
**功能：**查看文件内容

**语法：**cat 参数

**参数：**被查看的文件路径

### more命令 
**功能：**查看文件，可以支持翻页查看

**语法：**more 参数

**参数：**被查看的文件路径

**在查看过程中：**

+ 空格键翻页
+ q退出查看

## 操作文件或文件夹
### cp命令 
**功能：**复制文件、文件夹

**语法：**cp [-r] 参数1 参数2

**参数1：**被复制的

**参数2：**要复制去的地方

**选项：**-r，可选，复制文件夹使用

**示例：**

+ cp a.txt b.txt，复制当前目录下a.txt为b.txt
+ cp a.txt test/，复制当前目录a.txt到test文件夹内
+ cp -r test test2，复制文件夹test到当前文件夹内为test2存在

### mv命令 
**功能：**移动文件、文件夹

**语法：**mv 参数1 参数2

**参数1：**被移动的

**参数2：**要移动去的地方，参数2如果不存在，则会进行改名

### rm命令 
**功能：**删除文件、文件夹

**语法：**rm [-r -f] 参数参数

**参数：**支持多个，每一个表示被删除的，空格进行分隔

**选项：**-r，删除文件夹使用

**选项：**-f，强制删除，不会给出确认提示，一般root用户会用到

rm命令很危险，一定要注意，特别是切换到root用户的时候。

## 搜索和统计命令
### which命令 
**功能：**查看命令的程序本体文件路径

**语法：**which 参数

**参数：**被查看的命令

### find命令 
**功能：**搜索文件

**语法1按文件名搜索：find 路径 -name 参数**

**路径：**搜索的起始路径

**参数：**搜索的关键字，支持通配符*， 比如：*test表示搜索任意以test结尾的文件

**语法2按文件大小搜索：find 路径 -size +|-  参数**

**路径：**搜索的起始路径

**参数：**搜索的关键字，n[KMG]，n代表大小，KMG代表单位

### grep命令 
**功能：**过滤关键字

**语法：**grep [-n] 关键字 文件路径

**选项-n**：可选，表示在结果中显示匹配的行的行号。

**参数**：关键字，必填，表示过滤的关键字，带有空格或其它特殊符号，建议使

用””将关键字包围起来

**参数：**文件路径，必填，表示要过滤内容的文件路径，可作为内容输入端

### wc命令 
**功能**：统计

**语法**：wc [-c -m -l -w] 文件路径

+ 选项，-c，统计bytes数量
+ 选项，-m，统计字符数量
+ 选项，-l，统计行数
+ 选项，-w，统计单词数量
+ 参数，文件路径，被统计的文件，可作为内容输入端口

### 管道符| 
**写法：**|

**功能：**将符号左边的结果，作为符号右边的输入

**示例：**

cat a.txt | grep itheima，将cat a.txt的结果，作为grep命令的输入，

用来过滤itheima关键字

可以支持嵌套：

cat a.txt | grep itheima | grep itcast

###  echo命令 
**功能：**输出内容

**语法：**echo 参数

**参数：**被输出的内容

`反引号 

功能：被两个反引号包围的内容，会作为命令执行

示例：

echo `pwd`，会输出当前工作目录

### tail命令 
**功能：**查看文件尾部内容

**语法：**tail [-f] 参数

**参数：**被查看的文件

**选项**：-f，持续跟踪文件修改

### head命令
**功能：**查看文件头部内容

**语法：**head [-n] 参数

**参数：**被查看的文件

**选项：**-n，查看的行数

### 重定向符
功能：将符号左边的结果，输出到右边指定的文件中去

+ >，表示覆盖输出
+ >>，表示追加输出



